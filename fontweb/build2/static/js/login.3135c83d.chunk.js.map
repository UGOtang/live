{"version":3,"sources":["api/user.js","views/Login/Login.jsx","views/Login/index.js","api/index.js"],"names":["register","data","request","url","method","sendPhone","phone","login","withRouter","props","useState","loading","setLoading","onFinish","values","a","console","log","res","status","localStorage","setItem","token","getItem","history","push","message","error","className","style","textAlign","name","initialValues","remember","Item","rules","required","prefix","UserOutlined","placeholder","LockOutlined","type","valuePropName","noStyle","href","htmlType","Login","config","instance1","axios","create","baseURL","interceptors","use","err","response","defaults","headers","common"],"mappings":"oGAAA,kHAEO,SAASA,EAASC,GACrB,OAAOC,YAAQ,CACXC,IAAI,kBACJC,OAAO,OACPH,SAID,SAASI,EAAUJ,GACtB,OAAOC,YAAQ,CACXC,IAAI,mBACJC,OAAQ,OACRH,KAAK,CACDK,MAAML,KAKX,SAASM,EAAMN,GAClB,OAAOC,YAAQ,CACXC,IAAI,eACJC,OAAO,OACPH,W,mTCyDOO,eAzED,SAAAC,GACV,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAEMC,EAAQ,uCAAG,WAAOC,GAAP,eAAAC,EAAA,6DACbC,QAAQC,IAAI,4BAA6BH,GAD5B,SAGGP,YAAMO,GAHT,UAGTI,EAHS,OAIbF,QAAQC,IAAIC,GACM,MAAfA,EAAIC,OALM,oBAMTP,GAAW,GACXQ,aAAaC,QAAQ,QAAQH,EAAII,OACI,OAAlCF,aAAaG,QAAQ,SARf,wBASLd,EAAMe,QAAQC,KAAK,KATd,mDAaTb,GAAW,GACXc,EAAA,EAAQC,MAAM,8CAdL,4CAAH,sDAoBd,OACI,mBAAQC,UAAU,wBAAlB,SACI,qBAAKA,UAAU,QAAf,SACI,sBAAKA,UAAU,aAAf,UACI,oBAAIC,MAAO,CAACC,UAAU,UAAtB,sCACA,sBACA,oBACIC,KAAK,eACLC,cAAe,CAAEC,UAAU,GAC3BpB,SAAUA,EAHd,UAKI,kBAAMqB,KAAN,CACIH,KAAK,WACLI,MAAO,CAAC,CAAEC,UAAU,EAAMV,QAAS,yCAFvC,SAII,mBAAOW,OAAQ,cAACC,EAAA,EAAD,CAAcV,UAAU,wBAA0BW,YAAY,yBAEjF,kBAAML,KAAN,CACIH,KAAK,WACLI,MAAO,CAAC,CAAEC,UAAU,EAAMV,QAAS,mCAFvC,SAII,mBACIW,OAAQ,cAACG,EAAA,EAAD,CAAcZ,UAAU,wBAChCa,KAAK,WACLF,YAAY,mBAGpB,mBAAML,KAAN,WACI,kBAAMA,KAAN,CAAWH,KAAK,WAAWW,cAAc,UAAUC,SAAO,EAA1D,SACI,qDAGJ,mBAAGf,UAAU,oBAAoBgB,KAAK,GAAtC,yCAKJ,mBAAMV,KAAN,WACI,mBAAQO,KAAK,UAAUI,SAAS,SAASjB,UAAU,oBAAoBjB,QAASA,EAAhF,0BADJ,gBAIO,mBAAGiC,KAAK,cAAR,uDCtEhBE,a,gCCFf,wDAKO,SAAS5C,EAAQ6C,GAEpB,IAAMC,EAAYC,IAAMC,OAAO,CAC3BC,QAAQ,0BAiBZ,OAbAH,EAAUI,aAAalD,QAAQmD,KAAI,SAAAN,GAE/B,OAAOA,KACT,SAAAO,OAIFN,EAAUI,aAAaG,SAASF,KAAI,SAAAnC,GAChC,OAAOA,EAAIjB,QACb,SAAAqD,OAIKN,EAAUD,GAvBrBE,IAAMO,SAASC,QAAQC,OAAO,WAAatC,aAAaG,QAAQ","file":"static/js/login.3135c83d.chunk.js","sourcesContent":["import {request} from \"./index\";\r\n\r\nexport function register(data) {\r\n    return request({\r\n        url:'/users/register',\r\n        method:'post',\r\n        data\r\n    })\r\n}\r\n\r\nexport function sendPhone(data) {\r\n    return request({\r\n        url:\"/users/sendPhone\",\r\n        method: 'post',\r\n        data:{\r\n            phone:data\r\n        }\r\n    })\r\n}\r\n\r\nexport function login(data) {\r\n    return request({\r\n        url:\"/users/login\",\r\n        method:'post',\r\n        data\r\n    })\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Layout, Input, Icon, Form, Button, Divider, message, Checkbox } from 'antd'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\n\r\nimport {login} from \"../../api/user\";\r\nimport '@/style/view-style/login.scss'\r\n\r\nconst Login = props => {\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const onFinish = async (values) => {\r\n        console.log('Received values of form: ', values);\r\n\r\n        let res = await login(values);\r\n        console.log(res);\r\n        if(res.status === 200){\r\n            setLoading(true);\r\n            localStorage.setItem(\"token\",res.token);\r\n            if(localStorage.getItem(\"token\") !== null){\r\n                props.history.push('/');\r\n                return\r\n            }\r\n        }else {\r\n            setLoading(true);\r\n            message.error(\"账号或密码错误\")\r\n        }\r\n\r\n    };\r\n\r\n\r\n    return (\r\n        <Layout className='login animated fadeIn'>\r\n            <div className='model'>\r\n                <div className='login-form'>\r\n                    <h3 style={{textAlign:\"center\"}}>虎鱼直播</h3>\r\n                    <Divider />\r\n                    <Form\r\n                        name=\"normal_login\"\r\n                        initialValues={{ remember: true }}\r\n                        onFinish={onFinish}\r\n                    >\r\n                        <Form.Item\r\n                            name=\"username\"\r\n                            rules={[{ required: true, message: '请输入用户名' }]}\r\n                        >\r\n                            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"用户名\" />\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            name=\"password\"\r\n                            rules={[{ required: true, message: '请输入密码' }]}\r\n                        >\r\n                            <Input\r\n                                prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                                type=\"password\"\r\n                                placeholder=\"密码\"\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                                <Checkbox>记住我</Checkbox>\r\n                            </Form.Item>\r\n\r\n                            <a className=\"login-form-forgot\" href=\"\">\r\n                                忘记密码\r\n                            </a>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" loading={loading}>\r\n                                登录\r\n                            </Button>\r\n                            或者 <a href=\"/#/register\">现在注册!</a>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default withRouter(Login)\r\n","import Login from './Login.jsx'\r\n\r\nexport default Login\r\n","import axios from 'axios'\n\naxios.defaults.headers.common['th-auth'] = localStorage.getItem(\"token\");\n\n\nexport function request(config){\n\n    const instance1 = axios.create({\n        baseURL:'http://localhost:3002'\n    })\n\n//axios拦截器\n    instance1.interceptors.request.use(config => {\n        // console.log(config);\n        return config;\n    },err => {\n\n    })\n\n    instance1.interceptors.response.use(res => {\n        return res.data\n    },err => {\n\n    })\n\n    return instance1(config)   //返回promis，所以可以在实例后面直接then\n}\n"],"sourceRoot":""}